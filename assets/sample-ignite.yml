version: "1"

staging:
  fallback: false
  provision:
    vmware-fusion:
      rootdir: /Applications/VMware Fusion.app
      display: nogui
      state: hard
  default-provider: vmware-fusion

units:
  mysql-router:
    description: |
      mysql router.
    provider: vmware-fusion
    path: ~/Apple/var/VMware/mysql-cluster/mysql-router.vmwarevm/mysql-router.vmx
    host:
      - 192.168.117.141

  mysql-master:
    description: |
      mysql master.
    provider: vmware-fusion
    path: ~/Apple/var/VMware/mysql-cluster/mysql-master.vmwarevm/mysql-master.vmx
    host:
      - 192.168.117.138

  mysql-node-1:
    description: |
      mysql node 1.
    provider: vmware-fusion
    path: ~/Apple/var/VMware/mysql-cluster/mysql-node-1.vmwarevm/mysql-node-1.vmx
    host:
      - 192.168.117.139

  mysql-node-2:
    description: |
      mysql node 2.
    provider: vmware-fusion
    path: ~/Apple/var/VMware/mysql-cluster/mysql-node-2.vmwarevm/mysql-node-2.vmx
    host:
      - 192.168.117.140

  k8s-register:
    description: |
      docker register.
    provider: vmware-fusion
    path: ~/Apple/var/VMware/k8s-focal/k8s-registry.vmwarevm/k8s-registr.vmx
    host:
      - 192.168.117.143
      - 172.16.258.39

  k8s-master-1:
    description: |
      kubernete master 1.
    path: ~/Apple/var/VMware/k8s-focal/k8s-master-1.vmwarevm/k8s-master-1.vmx
    host:
      - 192.168.117.143
      - 172.16.258.39

  k8s-master-2:
    description: |
      kubernete master 2.
    path: ~/Apple/var/VMware/k8s-focal/k8s-master-2.vmwarevm/k8s-master-2.vmx
    host:
      - 192.168.117.144
      - 172.16.258.40

  k8s-master-3:
    description: |
      kubernete master 3.
    path: ~/Apple/var/VMware/k8s-focal/k8s-master-3.vmwarevm/k8s-master-3.vmx
    host:
      - 192.168.117.145
      - 172.16.258.41

  k8s-node-1:
    description: |
      kubernete node 1.
    path: ~/Apple/var/VMware/k8s-focal/k8s-node-1.vmwarevm/k8s-node-1.vmx
    host:
      - 192.168.117.146
      - 172.16.258.42

  k8s-node-2:
    description: |
      kubernete node 2.
    path: ~/Apple/var/VMware/k8s-focal/k8s-node-2.vmwarevm/k8s-node-2.vmx
    host:
      - 192.168.117.147
      - 172.16.258.43

  k8s-node-3:
    description: |
      kubernete node 3.
    path: ~/Apple/var/VMware/k8s-focal/k8s-node-3.vmwarevm/k8s-node-3.vmx
    host:
      - 192.168.117.148
      - 172.16.258.44

workspace:
  mysql-cluster:
    description: |
      mysql innodb cluster deployed in CentOS 8.
    tiers:
      - name: mysql-router
        dependencies:
          - mysql-master
          - mysql-node-1
          - mysql-node-2
      - name: mysql-master
      - name: mysql-node-1
        dependencies:
          - mysql-master
      - name: mysql-node-2
        dependencies:
          - mysql-master

  k8s-focal:
    description: |
      kubernetes deployed in ubuntu focal fossa.
    tiers:
      - name: k8s-registry
      - name: k8s-master-1
      - name: k8s-master-2
      - name: k8s-master-3
      - name: k8s-node-1
        dependencies:
          - k8s-master-1
          - k8s-master-2
          - k8s-master-3
      - name: k8s-node-2
        dependencies:
          - k8s-master-1
          - k8s-master-2
          - k8s-master-3
      - name: k8s-node-3
        dependencies:
          - k8s-master-1
          - k8s-master-2
          - k8s-master-3
